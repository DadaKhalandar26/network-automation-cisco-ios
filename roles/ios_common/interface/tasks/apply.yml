---
# Dispatcher â€“ decides what to run

- name: Apply access port configuration
  import_tasks: apply_access.yml
  when:
    - interfaces is defined
    - interfaces | selectattr('role', 'equalto', 'access') | list | length > 0

- name: Apply routed interface configuration
  import_tasks: apply_routed.yml
  when:
    - interfaces is defined
    - interfaces | selectattr('role', 'equalto', 'routed') | list | length > 0

- name: Apply SVI configuration
  import_tasks: apply_svi.yml
  when:
    - svis | default([]) | length > 0

- name: Apply extra interface commands
  import_tasks: apply_extra.yml
  when:
    - interfaces is defined

- import_tasks: apply_portchannel.yml
  tags: [interface, portchannel]
  when:
    - port_channels is defined
    - port_channels | length > 0
